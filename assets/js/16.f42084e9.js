(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{320:function(t,e,a){t.exports=a.p+"assets/img/cdn-cache.d2979a45.jpg"},395:function(t,e,a){t.exports=a.p+"assets/img/deploy-blog.e7d1def5.jpg"},505:function(t,e,a){"use strict";a.r(e);var s=a(40),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"如何使用免费服务来构建前端项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何使用免费服务来构建前端项目"}},[t._v("#")]),t._v(" 如何使用免费服务来构建前端项目")]),t._v(" "),s("p",[t._v("如果你只想搭建一个博客，那么你很可能不需要一个服务器，而且会更容易些")]),t._v(" "),s("p",[t._v("如果你需要在个人服务器上部署，有可能会经历以下步骤:")]),t._v(" "),s("ol",[s("li",[t._v("配置反向代理，你需要了解 nginx 或者 traefik 的配置")]),t._v(" "),s("li",[t._v("配置 https，使用 lets encrypt 生成证书")]),t._v(" "),s("li",[t._v("使用 cron 定期更新证书")]),t._v(" "),s("li",[t._v("手动部署：每次部署都需要登录服务器")]),t._v(" "),s("li",[t._v("自动部署(可选)：结合 github/gitlab 配置 CI/CD")]),t._v(" "),s("li",[t._v("如果自动部署，有可能使用到 docker 与 docker-compose (有可能自建 docker repo)")]),t._v(" "),s("li",[t._v("如果服务器在阿里云买的有可能还需要备案")])]),t._v(" "),s("p",[t._v("当然，如果你有一个完整的 "),s("code",[t._v("kubernetes")]),t._v(" 环境，后期工作量相对就会简单很多，但此时你也需要")]),t._v(" "),s("ol",[s("li",[t._v("使用 k8s 结合 ingress 自动生成证书 (一次性工作)")]),t._v(" "),s("li",[t._v("使用 helm 创建 chart")]),t._v(" "),s("li",[t._v("构建 docker 镜像 (有可能自建 docker repo)")]),t._v(" "),s("li",[t._v("结合 github/gitlab 配置 CI/CD")])]),t._v(" "),s("blockquote",[s("p",[t._v("这也是在 k8s 上部署前后端应用的一般流程")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(395),alt:"在k8s上部署博客"}})]),t._v(" "),s("p",[t._v("相对而言使用一个静态网站网站托管服务，复杂度与工作量就会少了很多，毕竟它部署时只需要维护若干静态文件。也更适合刚接触博客搭建或者没有服务器的同学")]),t._v(" "),s("h2",{attrs:{id:"_00-架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_00-架构"}},[t._v("#")]),t._v(" 00 架构")]),t._v(" "),s("p",[t._v("根据你的域名有没有备案以及对网络时延的要求，可以选择以下两种方案")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("react/vue/angular")]),t._v(" + "),s("code",[t._v("github")]),t._v(" + "),s("code",[t._v("netlify")]),t._v(" + "),s("code",[t._v("cloudflare")]),t._v("，适合域名没有进行备案且主要服务于国外的同学")]),t._v(" "),s("li",[s("code",[t._v("react/vue/angular")]),t._v(" + "),s("code",[t._v("github")]),t._v(" + "),s("code",[t._v("github actions")]),t._v(" + "),s("code",[t._v("alioss")]),t._v(" + "),s("code",[t._v("alicdn")]),t._v("，适合域名在国内进行备案的同学")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/shfshanyue/graph/master/draw/blog-arch-blog.jpg",alt:"如何搭建个人博客"}})]),t._v(" "),s("h2",{attrs:{id:"_01-选择一款静态网站生成器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-选择一款静态网站生成器"}},[t._v("#")]),t._v(" 01 选择一款静态网站生成器")]),t._v(" "),s("p",[t._v("动态博客应用状态过重，复杂性过高，不便于部署与迁移。无状态的静态博客是一个不错的选择。")]),t._v(" "),s("p",[t._v("如果你不想折腾数据库，那你可以选择一个静态网站生成器: 你只需要喂给它一大堆 markdown，它就会生成一些静态文件。")]),t._v(" "),s("p",[t._v("至于生成器，这是我曾经使用过的，感觉都很不错，你可以任选一款，如何构建参考官方文档。")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/gohugoio/hugo",target:"_blank",rel:"noopener noreferrer"}},[t._v("hugo"),s("OutboundLink")],1),t._v(": github star 39k。使用 go 开发，是我用过的构建最快的生成器，它的简介也只有一句话: "),s("code",[t._v("The world’s fastest framework for building websites.")]),t._v("，不过我自我感觉它的主题样式略少。如果你想定制，那你需要对 "),s("code",[t._v("go")]),t._v(" 语言的 "),s("code",[t._v("template")]),t._v(" 有些了解。")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/hexojs/hexo",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo"),s("OutboundLink")],1),t._v(": github star 28.4k。使用 node 开发，主题样式多，我还是较为喜欢这一点。")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/vuejs/vuepress",target:"_blank",rel:"noopener noreferrer"}},[t._v("vuepress"),s("OutboundLink")],1),t._v(": github star 14.5k。使用 vue 开发，一般用作文档较多。从我的博客风格就可以看出来，它使用 "),s("code",[t._v("vuepress")]),t._v(" 构建。")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/gatsbyjs/gatsby",target:"_blank",rel:"noopener noreferrer"}},[t._v("gatsby"),s("OutboundLink")],1),t._v(": github star 41 k。使用 React 开发，可定制性强。"),s("code",[t._v("React")]),t._v(" 的官网就是使用 "),s("code",[t._v("gatsby")]),t._v(" 开发")])]),t._v(" "),s("h2",{attrs:{id:"_02-如何部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-如何部署"}},[t._v("#")]),t._v(" 02 如何部署")]),t._v(" "),s("p",[t._v("可以部署在 "),s("code",[t._v("github pages")]),t._v(" 或者 "),s("code",[t._v("netlify")])]),t._v(" "),s("p",[t._v("推荐使用 "),s("code",[t._v("netlify")]),t._v("，它可以结合 "),s("code",[t._v("github")]),t._v(" 做 CI/CD: 当你把代码 push 到 github 的指定分支时，它就会在 netlify 自动部署，另外它也有缓存，重定向，Prerender等诸多配置")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("github pages"),s("OutboundLink")],1),t._v(": 部署后可以使用二级域名 "),s("code",[t._v("xxx.github.io")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.netlify.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("netlify"),s("OutboundLink")],1),t._v(": 部署后可以使用二级域名 "),s("code",[t._v("xxx.netlify.com")])])]),t._v(" "),s("p",[t._v("我的"),s("a",{attrs:{href:"https://shanyue.tech",target:"_blank",rel:"noopener noreferrer"}},[t._v("个人博客"),s("OutboundLink")],1),t._v("使用了 "),s("code",[t._v("netlify")]),t._v("，关于构建的配置文件如下")]),t._v(" "),s("div",{staticClass:"language-toml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-toml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("base")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("publish")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('".vuepress/dist"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("command")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run build"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/assets/*"')]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers.values")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("cache-control")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"max-age=31536000"')]),t._v("\n")])])]),s("h2",{attrs:{id:"_03-如果你想使用自己的域名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-如果你想使用自己的域名"}},[t._v("#")]),t._v(" 03 如果你想使用自己的域名")]),t._v(" "),s("p",[t._v("你可以在域名提供商 "),s("a",{attrs:{href:"https://sg.godaddy.com/zh",target:"_blank",rel:"noopener noreferrer"}},[t._v("godaddy"),s("OutboundLink")],1),t._v(" 或者"),s("a",{attrs:{href:"https://wanwang.aliyun.com/domain/searchresult/#/?keyword=shanyue&suffix=tech",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云"),s("OutboundLink")],1),t._v(" 直接注册一个。")]),t._v(" "),s("p",[t._v("并且在域名提供商处配置 CNAME: "),s("code",[t._v("yourdomain.com")]),t._v(" -> "),s("code",[t._v("xxx.netlify.com")])]),t._v(" "),s("p",[s("strong",[t._v("当使用了自己的域名后，你需要去 "),s("code",[t._v("netlify")]),t._v(" 为你的域名配置 "),s("code",[t._v("https")])])]),t._v(" "),s("h2",{attrs:{id:"_04-使用-cdn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_04-使用-cdn"}},[t._v("#")]),t._v(" 04 使用 CDN")]),t._v(" "),s("p",[t._v("由于网站托管服务的服务器大都在国外，网络速度上可能惨不忍睹，配置CDN就能派上用场了。")]),t._v(" "),s("p",[t._v("如果域名没有备案，建议使用 "),s("a",{attrs:{href:"https://www.cloudflare.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("cloudflare"),s("OutboundLink")],1),t._v(" 的CDN服务，完全免费")]),t._v(" "),s("p",[t._v("如果域名已经备案，建议使用阿里云的CDN服务，按量收费。")]),t._v(" "),s("p",[s("strong",[t._v("当然这时候 "),s("code",[t._v("https")]),t._v(" 需要重新配置 (阿里云的 https 流量也会收费)")])]),t._v(" "),s("blockquote",[s("p",[t._v("Note: 使用 CDN 时要配置好正确的 nameserver")])]),t._v(" "),s("h2",{attrs:{id:"_05-配置永久缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_05-配置永久缓存"}},[t._v("#")]),t._v(" 05 配置永久缓存")]),t._v(" "),s("p",[t._v("对于 vue/react 此类现代前端技术而言，结合 webpack 工程化越来越出色。如 "),s("code",[t._v("vuepress")]),t._v(" 中 "),s("code",[t._v("SPA")]),t._v(" 与 "),s("code",[t._v("SEO")]),t._v(" 的结合， "),s("strong",[t._v("但最重要的是生成带有 hash 的静态资源文件")])]),t._v(" "),s("p",[s("strong",[t._v("为带有 hash 的静态资源文件在源站(即netlify)配置永久缓存，也能在阿里云上为 CDN 与 https 省不少流量费")])]),t._v(" "),s("div",{staticClass:"language-toml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-toml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/assets/*"')]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers.values")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("cache-control")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"max-age=31536000"')]),t._v("\n")])])]),s("p",[t._v("以下是缓存在CDN命中的截图")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("cache-control: ma-age=31536000")]),t._v(" 设置永久缓存")]),t._v(" "),s("li",[s("code",[t._v("via")]),t._v(" 通过的代理节点")]),t._v(" "),s("li",[s("code",[t._v("x-cache: HIT")]),t._v(" 在CDN上命中缓存")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(320),alt:"proxy cache"}})]),t._v(" "),s("h2",{attrs:{id:"相关文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关文章"}},[t._v("#")]),t._v(" 相关文章")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://shanue.tech/op/deploy-fe-with-netlify",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 netlify 部署你的前端应用"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.netlify.com/routing/redirects/rewrites-proxies/#limitations",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何使用 docker 高效部署前端应用"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=r.exports}}]);