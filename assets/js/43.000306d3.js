(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{443:function(t,s,a){t.exports=a.p+"assets/img/git.55bfe1cd.jpg"},613:function(t,s,a){"use strict";a.r(s);var e=a(40),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"服务器上-git-的安装及基本配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务器上-git-的安装及基本配置"}},[t._v("#")]),t._v(" 服务器上 git 的安装及基本配置")]),t._v(" "),e("p",[e("code",[t._v("git")]),t._v(" 对于开发者来说属于必备工具中的必备工具了。何况，没有 "),e("code",[t._v("git")]),t._v(" 的话，"),e("strong",[t._v("面向github编程")]),t._v(" 从何说起，如同一个程序员断了左膀右臂。")]),t._v(" "),e("p",[t._v("本篇文章将介绍如何在服务器(centos)上安装最新版本的 git 及其基本配置")]),t._v(" "),e("ul",[e("li",[t._v("使用源码编译安装 git")]),t._v(" "),e("li",[t._v("使用 ansible 自动化安装 git")]),t._v(" "),e("li",[t._v("git 基本配置")])]),t._v(" "),e("blockquote",[e("p",[t._v("你对流程熟悉后，特别是了解 ansible 后，只需要一分钟便可以操作完成")])]),t._v(" "),e("ul",[e("li",[t._v("原文地址: "),e("a",{attrs:{href:"https://github.com/shfshanyue/op-note/blob/master/git.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("服务器上 git 的安装及基本配置"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("系列文章: "),e("a",{attrs:{href:"https://github.com/shfshanyue/op-note",target:"_blank",rel:"noopener noreferrer"}},[t._v("山月的服务器运维笔记"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ yum "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v("\n")])])]),e("p",[t._v("如果使用 "),e("code",[t._v("yum")]),t._v(" 来安装 "),e("code",[t._v("git")]),t._v(" 的话，那实在没有必要单开一篇文章了，但好事多磨。那使用 "),e("code",[t._v("yum")]),t._v(" 的弊端在哪里？我们知道，"),e("code",[t._v("yum")]),t._v(" 为了保证它的软件的稳定性，往往软件的版本都会很老，以至于非常不好用。")]),t._v(" "),e("p",[e("strong",[t._v("而且最重要的是 "),e("code",[t._v("yum")]),t._v(" 安装的 "),e("code",[t._v("git")]),t._v(" 没有语法高亮！")])]),t._v(" "),e("h2",{attrs:{id:"安装最新版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装最新版本"}},[t._v("#")]),t._v(" 安装最新版本")]),t._v(" "),e("p",[t._v("安装最新版本，或者说稳定版本，可以充分体验新版本带来的特性，从而使自己更舒服一些。从源码安装 "),e("code",[t._v("git")]),t._v(" 是最无拘无束最灵活的安装方法，但同时也是最繁琐的方法。")]),t._v(" "),e("p",[t._v("关于源码编译安装详细教程可以参考 "),e("a",{attrs:{href:"https://github.com/git/git",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/git/git"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("p",[t._v("在编译之前需要先安装依赖如下")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("gettext-devel\nexpat-devel\ncurl-devel\nzlib-devel\nperl-devel\nopenssl-devel\nsubversion-perl\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\ngcc\n")])])]),e("p",[t._v("随后根据文档进行源码编译安装：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用旧版本 git 下载源码")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/git/git.git\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout v2.26.2\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("prefix")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr all\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("prefix")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),e("p",[t._v("查看版本号，安装成功")]),t._v(" "),e("p",[e("code",[t._v("git version")]),t._v("，查看版本号，此时为 "),e("code",[t._v("2.26.2")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" version\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" version "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.26")]),t._v(".2\n")])])]),e("p",[t._v("再用它 "),e("code",[t._v("git status")]),t._v("，查看下语法高亮效果")]),t._v(" "),e("p",[e("img",{attrs:{src:a(443),alt:"git 高亮效果"}})]),t._v(" "),e("h2",{attrs:{id:"使用-ansible-自动化安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-ansible-自动化安装"}},[t._v("#")]),t._v(" 使用 ansible 自动化安装")]),t._v(" "),e("blockquote",[e("p",[t._v("如果你对 ansible 不够了解，可以参考我的文章 "),e("a",{attrs:{href:"https://mp.weixin.qq.com/s/t2fpzPJk3pCK3qBgo_SdyQ",target:"_blank",rel:"noopener noreferrer"}},[t._v("ansible 入门指南"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("p",[t._v("而对于安装 git，如果采用以上源码编译方法则过于耗时及繁琐，而如果我们使用 "),e("code",[t._v("ansible")]),t._v(" 进行自动化运维的话，选择一个好用的 "),e("code",[t._v("Ansible Role")]),t._v(" 就可以了，此处我们选择 "),e("a",{attrs:{href:"https://github.com/geerlingguy/ansible-role-git",target:"_blank",rel:"noopener noreferrer"}},[t._v("geerlingguy.git"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ ansible-galaxy "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" geerlingguy.git\n")])])]),e("p",[t._v("配置 "),e("code",[t._v("ansible playbook")]),t._v("，指定变量，从源码安装，并安装最新版本。")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hosts")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" all\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("roles")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("role")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" geerlingguy.git\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("vars")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从源码安装")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("git_install_from_source")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装最新版本")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("git_install_from_source_force_update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n")])])]),e("p",[t._v("使用 "),e("code",[t._v("ansible-playbook")]),t._v(" 对服务器进行批量安装")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ ansible-playbook -i hosts git.yaml\n")])])]),e("blockquote",[e("p",[t._v("关于我服务器所有的 ansible role 配置，可以参考我的配置文件 "),e("a",{attrs:{href:"https://github.com/shfshanyue/ansible-op",target:"_blank",rel:"noopener noreferrer"}},[t._v("shfshanyue/ansible-op"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"基本配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本配置"}},[t._v("#")]),t._v(" 基本配置")]),t._v(" "),e("p",[t._v("在服务器中安装完 git 后，即可对它进行基础配置。全局配置邮箱及用户名，此时就可以愉快地在服务器中使用 "),e("code",[t._v("git")]),t._v(" 管理代码了")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global user.name shfshanyue\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global user.email xianger94@gmail.com\n")])])]),e("h2",{attrs:{id:"面向-github-编程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#面向-github-编程"}},[t._v("#")]),t._v(" 面向 github 编程")]),t._v(" "),e("p",[t._v("但是现在就可以面向 "),e("code",[t._v("github")]),t._v(" 编程了吗？不！")]),t._v(" "),e("p",[t._v("使用 "),e("code",[t._v("ssh -T")]),t._v(" 测试连通性")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" -T git@github.com\nPermission denied "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("publickey"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".\n")])])]),e("p",[t._v("此时需要配置 "),e("code",[t._v("ssh key")]),t._v(" 来保证正确地面向 github 编程，请关注并查看下篇文章 "),e("a",{attrs:{href:"https://github.com/shfshanyue/op-note/blob/master/ssh-setting.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("服务器上 ssh key 管理及 github 配置"),e("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);