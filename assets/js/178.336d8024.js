(window.webpackJsonp=window.webpackJsonp||[]).push([[178],{622:function(s,t,e){"use strict";e.r(t);var a=e(40),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"云服务器中-ssh-key-管理与-github-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#云服务器中-ssh-key-管理与-github-配置"}},[s._v("#")]),s._v(" 云服务器中 ssh key 管理与 github 配置")]),s._v(" "),e("p",[s._v("程序员经常挂在嘴边的一句话是: 面向 github 编程。如果没有 github 对程序员而言万古如长夜，github 对程序员的重要性可见一斑。")]),s._v(" "),e("p",[s._v("与 "),e("code",[s._v("github")]),s._v(" 进行协同的工具是 "),e("code",[s._v("git")]),s._v("，在上一章 "),e("RouterLink",{attrs:{to:"/op-note/git.html"}},[s._v("云服务器上 git 安装及基本配置")]),s._v(" 对它在服务器上按照也有了基本介绍。虽然 "),e("code",[s._v("git")]),s._v(" 可以工作在 "),e("code",[s._v("ssh")]),s._v(" 与 "),e("code",[s._v("https")]),s._v(" 两种协议上，但为了安全性及便利性，更多时候会选择 "),e("code",[s._v("ssh")]),s._v("。")],1),s._v(" "),e("blockquote",[e("p",[s._v("如果采用 https，则每次 git push 都需要验证身份")])]),s._v(" "),e("p",[s._v("此篇文章的主要内容是:")]),s._v(" "),e("ol",[e("li",[e("code",[s._v("ssh keygen")]),s._v(" 生成非对称加密中的 public-key 与 private-key")]),s._v(" "),e("li",[s._v("把 publik-key 扔到 github 上，与上篇文章 "),e("a",{attrs:{href:"https://shanyue.tech/op/init.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("服务器高效登录配置"),e("OutboundLink")],1),s._v(" 一样的步骤，不过上文是如何把 key 扔到云服务器，而此处是扔到 github。")])]),s._v(" "),e("blockquote",[e("p",[s._v("你对流程熟悉后，只需要一分钟便可以操作完成")])]),s._v(" "),e("ul",[e("li",[s._v("原文地址: "),e("a",{attrs:{href:"https://shanyue.tech/op/ssh-setting.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("云服务器 ssh key 以及 git 的配置"),e("OutboundLink")],1)]),s._v(" "),e("li",[s._v("系列文章: "),e("a",{attrs:{href:"https://shanyue.tech/op/",target:"_blank",rel:"noopener noreferrer"}},[s._v("服务器运维笔记"),e("OutboundLink")],1)])]),s._v(" "),e("h2",{attrs:{id:"permission-denied-publickey"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#permission-denied-publickey"}},[s._v("#")]),s._v(" Permission denied (publickey).")]),s._v(" "),e("p",[s._v("如果没有在 github 设置 public key 而直接执行 "),e("code",[s._v("git clone")]),s._v(" 命令的话，会有权限问题。")]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("ssh -T")]),s._v(" 测试连通性如下，会有一个 "),e("code",[s._v("Permission denied")]),s._v(" 的异常。")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone git@github.com:vim/vim.git\nCloning into "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vim'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nWarning: Permanently added the RSA "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" key "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" IP address "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'13.229.188.59'")]),s._v(" to the list of known hosts.\nPermission denied "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("publickey"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\nfatal: Could not "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" from remote repository.\n\nPlease "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" sure you have the correct access rights\nand the repository exists.\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不过有一个更直接的命令去查看是否有权限")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -T git@github.com\nPermission denied "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("publickey"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n")])])]),e("h2",{attrs:{id:"生成新的-ssh-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生成新的-ssh-key"}},[s._v("#")]),s._v(" 生成新的 ssh key")]),s._v(" "),e("p",[s._v("使用命令 "),e("code",[s._v("ssh-keygen")]),s._v(" 可以生成配对的 "),e("code",[s._v("id_rsa")]),s._v(" 与 "),e("code",[s._v("id_rsa.pub")]),s._v(" 文件，生成之后只需把 "),e("code",[s._v("id_rsa.pub")]),s._v(" 扔到 github 即可。")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成一个 ssh-key")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -t: 可选择 dsa | ecdsa | ed25519 | rsa | rsa1，代表加密方式")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -C: 注释，一般写自己的邮箱")]),s._v("\n$ ssh-keygen -t rsa -C "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shanyue"')]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成 id_rsa/id_rsa.pub: 配对的私钥与公钥")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" ~/.ssh\nauthorized_keys  config  id_rsa  id_rsa.pub  known_hosts\n")])])]),e("h2",{attrs:{id:"在-github-设置里新添一个-ssh-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在-github-设置里新添一个-ssh-key"}},[s._v("#")]),s._v(" 在 github 设置里新添一个 ssh key")]),s._v(" "),e("p",[s._v("在云服务器中复制 "),e("code",[s._v("~/.ssh/id_rsa.pub")]),s._v(" 中文件内容，并粘贴到github 的配置中。")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" ~/.ssh/id_rsa.pub\nssh-rsa AAAAB3SSSSSSSSSSSSSSSSSSSSSBAQDcM4aOo9qlrHOnh0+HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHuM9cYmdKq5ZMfO0dQ5PB53nqZQ1YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAc1w7bC0PD02M706ZdQm5M9Q9VFzLY0TK1nz19fsh2I2yuKwHJJeRxsFAUJKgrtNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN7nm6B/9erp5n4FDKJFxdnFWuhqqUwMzRa9rUfhOX1qJ1SYAWUryQ90rpxOwXt9Pfq0Y13VsWk3QQ8nyaEJzytEXG7OR9pf9zDQph4r4rpJbXCwNjXn/ThL shanyue\n")])])]),e("p",[s._v("在 github 的 ssh keys 设置中："),e("a",{attrs:{href:"https://github.com/settings/keys",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/settings/keys"),e("OutboundLink")],1),s._v(" 点击 "),e("code",[s._v("New SSH key")]),s._v(" 添加刚才生成的 public key。")]),s._v(" "),e("p",[s._v("更多图文指引可以参照官方文档："),e("a",{attrs:{href:"https://help.github.com/cn/articles/adding-a-new-ssh-key-to-your-github-account",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://help.github.com/cn/articles/adding-a-new-ssh-key-to-your-github-account"),e("OutboundLink")],1)]),s._v(" "),e("h2",{attrs:{id:"设置成功"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置成功"}},[s._v("#")]),s._v(" 设置成功")]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("ssh -T")]),s._v(" 测试成功， 此时可以成功愉快地面向 github 编程了，再也不愁没地抄代码了。")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -T git@github.com\nHi shfshanyue"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" You"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ve successfully authenticated, but GitHub does not provide shell access.\n\n$ git clone git@github.com:shfshanyue/vim-config.git\nCloning into '")]),s._v("vim-config'"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nremote: Enumerating objects: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("183")]),s._v(", done.\nremote: Total "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("183")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("delta "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", reused "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("delta "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", pack-reused "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("183")]),s._v("\nReceiving objects: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("183")]),s._v("/183"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("411.13")]),s._v(" KiB "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("55.00")]),s._v(" KiB/s, done.\nResolving deltas: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("/100"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", done.\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);