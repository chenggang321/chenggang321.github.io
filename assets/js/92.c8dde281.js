(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{512:function(s,t,e){"use strict";e.r(t);var a=e(40),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"使用-serverless-部署前端应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-serverless-部署前端应用"}},[s._v("#")]),s._v(" 使用 Serverless 部署前端应用")]),s._v(" "),e("blockquote",[e("p",[s._v("今天刚从杭州转到义乌，计划在义乌休整一周，这段时间正好准备一下面试，再写几篇文章。")]),s._v(" "),e("p",[s._v("关于文章，只在博客 "),e("a",{attrs:{href:"https://shanyue.tech",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://shanyue.tech"),e("OutboundLink")],1),s._v(" 与公众号里发表，最近也比较懒，连往掘金或者 CSDN 发都失去了耐心，当然最主要的原因还是上边没有人点赞...")]),s._v(" "),e("p",[s._v("另外，义乌有没啥可以转转的地方，闲来没事也好出去走走。")]),s._v(" "),e("p",[s._v("废话也不说了，正文也比较简单，可以用来薅羊毛")])]),s._v(" "),e("p",[s._v("在本系列的前几篇文章介绍了 "),e("code",[s._v("vercel")]),s._v("、"),e("code",[s._v("netlify")]),s._v(" 和 "),e("code",[s._v("alioss")]),s._v(" 部署前端应用，无论哪一种选择，以下三项配置都是必不可少的:")]),s._v(" "),e("div",{staticClass:"language-toml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-toml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目的根目录，及 npm 命令执行的目录")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("base")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将要服务化的静态文件，也是打包后生成的目录")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("publish")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('".vuepress/dist"')]),s._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打包命令")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("command")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run build"')]),s._v("\n")])])]),e("h2",{attrs:{id:"serverless-部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#serverless-部署"}},[s._v("#")]),s._v(" Serverless 部署")]),s._v(" "),e("p",[s._v("在腾讯云的 Serverless 中，需要配置文件来部署应用。部署纯前端页面的话，需要使用一个 "),e("code",[s._v("tencent-website")]),s._v(" 的组件，并使用以上配置进行部署。")]),s._v(" "),e("p",[s._v("以下是使用 "),e("code",[s._v("vuepress")]),s._v(" 搭建"),e("a",{attrs:{href:"https://shanyue.tech",target:"_blank",rel:"noopener noreferrer"}},[s._v("我的博客"),e("OutboundLink")],1),s._v("的 Serverless 配置文件，在根目录新建配置文件 "),e("code",[s._v("serverless.yaml")]),s._v("，配置如下:")]),s._v(" "),e("blockquote",[e("p",[s._v("更详细的配置请看过来："),e("a",{attrs:{href:"https://github.com/serverless-components/tencent-website/blob/master/docs/configure.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("Serverless Website 全配置"),e("OutboundLink")],1)])]),s._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("component")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" website "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (必填) 引用 component 的名称，当前用到的是 tencent-website 组件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" shanyue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("blog "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (必填) 该 website 组件创建的实例名称")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("inputs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("src")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("src")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" .\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("index")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" index.html\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dist")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" .vuepress/dist\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hook")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" npm run build\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# websitePath: ./")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("region")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ap"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("guangzhou\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("bucketName")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" my"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("bucket\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("protocol")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https\n")])])]),e("p",[s._v("执行命令前设置两个环境变量(我偷懒直接全部扔到了 "),e("code",[s._v("bashrc")]),s._v(" 下)，在腾讯云的账号体系中可以找到：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TENCENT_SECRET_ID")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("shanyue-id\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TENCENT_SECRET_KEY")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("shanyue-key\n")])])]),e("p",[s._v("万事俱备只欠东风，一个命令搞定：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需提前下载: npm i -g serverless")]),s._v("\n$ sls\n\nserverless ⚡framework\nAction: "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deploy"')]),s._v(" - Stage: "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dev"')]),s._v(" - App: "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shanyue-blog"')]),s._v(" - Instance: "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shanyue-blog"')]),s._v("\n\nregion:  ap-guangzhou\nwebsite: https://my-bucket-1257314149.cos-website.ap-guangzhou.myqcloud.com\n\nFull details: https://serverless.cloud.tencent.com/apps/shanyue-blog/shanyue-blog/dev\n\n103s › shanyue-blog › Success\n")])])]),e("h2",{attrs:{id:"serverless-域名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#serverless-域名"}},[s._v("#")]),s._v(" Serverless 域名")]),s._v(" "),e("p",[s._v("此时可以通过域名: "),e("a",{attrs:{href:"https://my-bucket-1257314149.cos-website.ap-guangzhou.myqcloud.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://my-bucket-1257314149.cos-website.ap-guangzhou.myqcloud.com"),e("OutboundLink")],1),s._v(" 访问我的博客，不过域名好像过长？")]),s._v(" "),e("p",[s._v("在腾讯云的 Serverless 中使用自己的域名需要备案，这里就不细讲了。")]),s._v(" "),e("h2",{attrs:{id:"总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),e("p",[s._v("结合 Github Actions 能够实现与 "),e("code",[s._v("vercel")]),s._v(" 和 "),e("code",[s._v("netlify")]),s._v(" 差不多的自动部署，他最大的优势是在国内有着稳定的网络，且免费的托管方案。如果有一点麻烦，那就是自定义域名，如果你仅仅想用它做一个示例 Demo，那完全够用！")])])}),[],!1,null,null,null);t.default=n.exports}}]);