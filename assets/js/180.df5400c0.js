(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{623:function(t,s,e){"use strict";e.r(s);var a=e(40),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"窗口复用与-tmux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#窗口复用与-tmux"}},[t._v("#")]),t._v(" 窗口复用与 tmux")]),t._v(" "),e("blockquote",[e("p",[t._v("tmux is a terminal multiplexer")])]),t._v(" "),e("p",[e("code",[t._v("tmux")]),t._v(" 是一个终端复用器，这也是它命名的由来 "),e("code",[t._v("t(terminal) mux(multiplexer)")]),t._v("，你可以在一个屏幕上管理多个终端！")]),t._v(" "),e("p",[t._v("在 "),e("code",[t._v("mac")]),t._v(" 上得益于 "),e("a",{attrs:{href:"https://www.iterm2.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("iterm2"),e("OutboundLink")],1),t._v("，你管理多个终端窗口相当方便。但是在 linux 上，"),e("code",[t._v("iterm2")]),t._v(" 就鞭长莫及了，"),e("code",[t._v("tmux")]),t._v(" 的优势就显出来了。")]),t._v(" "),e("p",[t._v("就我理解，"),e("code",[t._v("tmux")]),t._v(" 在 linux 上或者 mac 上有诸多好处")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("分屏")]),t._v(" "),e("p",[t._v("诚然，"),e("code",[t._v("iterm2")]),t._v(" 也是可以做到分屏的，但是 "),e("code",[t._v("iterm2")]),t._v(" 有一个缺点便是 "),e("code",[t._v("iterm for Mac")]),t._v("。如果结合 "),e("code",[t._v("iterm2")]),t._v(" 与 "),e("code",[t._v("ssh")]),t._v(" 的话，"),e("code",[t._v("iterm2")]),t._v(" 分屏需要不断地 "),e("code",[t._v("ssh <server>")]),t._v("，导致的后果就是有多个用户连接，使用 "),e("code",[t._v("who")]),t._v(" 命令查看登录用户数。")])]),t._v(" "),e("li",[e("p",[t._v("attach")]),t._v(" "),e("p",[e("code",[t._v("attach")]),t._v(" 可以起到保护现场的作用，不至于因 "),e("code",[t._v("ssh timeout")]),t._v("，而丧失了工作环境。")])]),t._v(" "),e("li",[e("p",[t._v("操作简单，可配置化")]),t._v(" "),e("p",[t._v("你可以使用快捷键很快地在多个窗口，面板间切换，粘贴复制，无限滚屏。")])])]),t._v(" "),e("p",[t._v("本章将介绍以下内容")]),t._v(" "),e("ul",[e("li",[t._v("contos/mac 上如何安装 "),e("code",[t._v("tmux")])]),t._v(" "),e("li",[t._v("使用 ansible 自动化批量安装 "),e("code",[t._v("tmux")])]),t._v(" "),e("li",[e("code",[t._v("tmux")]),t._v(" 常用操作")])]),t._v(" "),e("p",[t._v("至于说它高颜值，体现在可定制化样式的状态栏下，可以设置状态栏的样式, 位置，当前window的样式，状态栏信息的丰富度。比如 "),e("a",{attrs:{href:"https://github.com/gpakosz/.tmux",target:"_blank",rel:"noopener noreferrer"}},[t._v("gpakosz/.tmux"),e("OutboundLink")],1),t._v(" 的配置")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://cloud.githubusercontent.com/assets/553208/9890797/8dffe542-5c02-11e5-9c06-a25b452e6fcc.gif",alt:"tmux"}})]),t._v(" "),e("ul",[e("li",[t._v("原文地址: "),e("a",{attrs:{href:"https://shanyue.tech/op/tmux-setting.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("窗口复用与 tmux"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("系列文章: "),e("a",{attrs:{href:"https://shanyue.tech/op/",target:"_blank",rel:"noopener noreferrer"}},[t._v("服务器运维笔记"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),e("p",[t._v("如果你在 mac 上，那么你可以使用 "),e("code",[t._v("brew install tmux")]),t._v(" 安装 tmux，简单，快捷。")]),t._v(" "),e("p",[t._v("但是你在 centos 上，如果直接使用 "),e("code",[t._v("yum")]),t._v(" 来安装软件，会安装特别旧的版本，且很多实用的功能无法使用。那么直接通过 "),e("a",{attrs:{href:"https://github.com/tmux/tmux",target:"_blank",rel:"noopener noreferrer"}},[t._v("tmux源码"),e("OutboundLink")],1),t._v(" 自己编译安装则是一个不错的注意")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装软件依赖")]),t._v("\n$ yum "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y gcc automake libevent-devel ncurses-devel glibc-static\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 下载源代码")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone git@github.com:tmux/tmux.git\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换到 2.8 版本")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.8")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" tmux\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 编译源码")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" autogen.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" ./configure "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看版本号")]),t._v("\n$ ./tmux -V\ntmux "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.8")]),t._v("\n")])])]),e("h3",{attrs:{id:"使用-ansible-自动化安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-ansible-自动化安装"}},[t._v("#")]),t._v(" 使用 ansible 自动化安装")]),t._v(" "),e("p",[e("strong",[t._v("使用源码编译安装过于琐碎且易错，又有可能需要在若干台服务器上安装 "),e("code",[t._v("tmux")]),t._v("，此时使用 "),e("code",[t._v("ansible")]),t._v(" 进行自动化安装是一个不错的选择。")]),t._v(" 关于 "),e("code",[t._v("ansible")]),t._v(" 可参考本系列文章 "),e("a",{attrs:{href:"https://shanyue.tech/op/ansible-guide",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 ansible 做自动化运维"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone git@github.com:shfshanyue/ansible-op.git\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一次性给多服务器上安装 tmux")]),t._v("\n$ ansible-playbook -i hosts tmux.yml\n")])])]),e("p",[e("code",[t._v("tmux")]),t._v(" 这个 ansible role 的配置在 "),e("a",{attrs:{href:"https://github.com/shfshanyue/ansible-op/blob/master/roles/tmux/tasks/main.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("我的tmux配置"),e("OutboundLink")],1),t._v(" 上。配置文件如下")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖软件")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" prepare\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("yum")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{{item}}"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with_items")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" gcc\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" automake\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" libevent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("devel\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 字符终端处理库")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ncurses"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("devel\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" glibc"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("static\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 下载 tmux 源文件")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" install tmux\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("git")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("repo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//github.com/tmux/tmux.git\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dest")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ~/Documents/tmux\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.8")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" make tmux\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("shell")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" sh autogen.sh "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" ./configure "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" make\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("args")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("chdir")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ~/Documents/tmux/\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使 tmux 全局可执行")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" copy tmux\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("copy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("src")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ~/Documents/tmux/tmux\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dest")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /usr/bin/tmux\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("remote_src")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yes\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0755")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用我的配置文件")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" clone config file\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("when")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" USE_ME\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("git")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("repo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//github.com/shfshanyue/tmux"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config.git \n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dest")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ~/Documents/tmux"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" copy config file\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("copy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("src")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ~/Documents/tmux"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/.tmux.conf\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dest")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ~/.tmux.conf\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("remote_src")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yes\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" delete tmux"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config \n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("file")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ~/Documents/tmux"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("state")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" absent\n")])])]),e("h2",{attrs:{id:"快速开始"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速开始"}},[t._v("#")]),t._v(" 快速开始")]),t._v(" "),e("h3",{attrs:{id:"术语"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#术语"}},[t._v("#")]),t._v(" 术语")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("server")]),t._v(" 包含多个 "),e("code",[t._v("session")])]),t._v(" "),e("li",[e("code",[t._v("session")]),t._v(" 包含多个 "),e("code",[t._v("window")])]),t._v(" "),e("li",[e("code",[t._v("window")]),t._v(" 类似于 "),e("code",[t._v("iterm2")]),t._v(" 的 "),e("code",[t._v("Tab")]),t._v("，包含多个 "),e("code",[t._v("pane")]),t._v("，以下中文会翻译为窗口")]),t._v(" "),e("li",[e("code",[t._v("pane")]),t._v(" 类似于 "),e("code",[t._v("iterm2")]),t._v(" 的 "),e("code",[t._v("Pane")]),t._v("，以下中文会翻译为面板")])]),t._v(" "),e("h3",{attrs:{id:"启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[t._v("#")]),t._v(" 启动")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 新建一个 tmux session")]),t._v("\n$ tmux\n")])])]),e("h3",{attrs:{id:"分屏"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分屏"}},[t._v("#")]),t._v(" 分屏")]),t._v(" "),e("img",{attrs:{width:"600",src:"https://raw.githubusercontent.com/shfshanyue/op-note/master/assets/tmux-split.gif",loading:"lazy"}}),t._v(" "),e("p",[t._v("在 "),e("code",[t._v("tmux")]),t._v(" 环境下使用快捷键 "),e("code",[t._v("prefix %")]),t._v(" 与 "),e("code",[t._v('prefix "')]),t._v(" 完成分屏")]),t._v(" "),e("h3",{attrs:{id:"查看所有快捷键"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看所有快捷键"}},[t._v("#")]),t._v(" 查看所有快捷键")]),t._v(" "),e("img",{attrs:{width:"600",src:"https://raw.githubusercontent.com/shfshanyue/op-note/master/assets/tmux-help.jpg",loading:"lazy"}}),t._v(" "),e("p",[e("code",[t._v("prefix ?")])]),t._v(" "),e("h2",{attrs:{id:"tmux-高频操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tmux-高频操作"}},[t._v("#")]),t._v(" tmux 高频操作")]),t._v(" "),e("h3",{attrs:{id:"向终端发送-prefix-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#向终端发送-prefix-key"}},[t._v("#")]),t._v(" 向终端发送 prefix key")]),t._v(" "),e("p",[t._v("我习惯 "),e("code",[t._v("<Crtl-s>")]),t._v(" 来作为前缀键，默认前缀建为 "),e("code",[t._v("<Ctrl-b>")]),t._v("。"),e("code",[t._v("send-prefix")]),t._v(" 代表向终端发送前缀键，"),e("code",[t._v("send-prefix -2")]),t._v(" 代表新增一个快捷键代表前缀键。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以下命令直接在 tmux 命令模式执行，或者加关键字 `tmux` 在 shell 中执行，或者写入配置文件 ~/.tmux.conf 中生效")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `prefix :` 可以进入 tmux 命令模式")]),t._v("\n\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" -g prefix2 C-s\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("bind")]),t._v(" C-s send-prefix -2\n")])])]),e("h3",{attrs:{id:"保持-ssh-连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#保持-ssh-连接"}},[t._v("#")]),t._v(" 保持 ssh 连接")]),t._v(" "),e("p",[t._v("每次新建 "),e("code",[t._v("session")]),t._v(" 的时候带上名字，方便下次 "),e("code",[t._v("attach")]),t._v(" 。")]),t._v(" "),e("p",[t._v("稍微提一个命令 "),e("code",[t._v("detach")]),t._v("，默认快捷键 "),e("code",[t._v("<prefix> d")]),t._v("，会先 "),e("code",[t._v("detach")]),t._v(" 掉当前 "),e("code",[t._v("session")]),t._v("。")]),t._v(" "),e("blockquote",[e("p",[t._v("prefix 默认为 "),e("code",[t._v("<Ctrl-b>")])])]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("$ tmux new -s shanyue\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者使用快捷键 prefix + d")]),t._v("\n$ tmux detach\n$ tmux attach -t shanyue\n")])])]),e("h3",{attrs:{id:"快速移动面板"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速移动面板"}},[t._v("#")]),t._v(" 快速移动面板")]),t._v(" "),e("p",[t._v("移动面板命令为 "),e("code",[t._v("select-pane")]),t._v("，可配置为 "),e("code",[t._v("vim")]),t._v(" 式的移动命令。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以下命令直接在 tmux 命令模式执行，或者加关键字 `tmux` 在 shell 中执行，或者写入配置文件 ~/.tmux.conf 中生效")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `prefix :` 可以进入 tmux 命令模式")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bind 绑定快捷键")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -r 可重复按键")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# select-pane 选择面板")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("bind")]),t._v(" -r h select-pane -L \n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("bind")]),t._v(" -r l select-pane -R\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("bind")]),t._v(" -r j select-pane -D\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("bind")]),t._v(" -r k select-pane -U\n")])])]),e("p",[t._v("其中，参数 "),e("code",[t._v("-r")]),t._v(" 代表可重复按键，比如 "),e("code",[t._v("prefix r r")]),t._v(" 表示 "),e("code",[t._v("prefix r， prefix r")]),t._v("。其中按键时间需要通过 "),e("code",[t._v("repeat-time")]),t._v(" 来设置，一般为500ms。")]),t._v(" "),e("p",[t._v("另外，也可以开启鼠标支持，通过鼠标快速移动面板。")]),t._v(" "),e("h3",{attrs:{id:"重命名窗口名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重命名窗口名"}},[t._v("#")]),t._v(" 重命名窗口名")]),t._v(" "),e("p",[e("code",[t._v("rename-window")]),t._v(" 为重命名窗口名的命令，默认快捷键 "),e("code",[t._v("prefix ,")])]),t._v(" "),e("p",[t._v("但是有一个小问题，每当重命名窗口名后，敲几个空格又会自动重命名，自己的辛勤工作又被破坏了...")]),t._v(" "),e("p",[t._v("需要配置以下两个配置把它俩给关了，终于可以重命名了")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以下命令直接在 tmux 命令模式执行，或者加关键字 `tmux` 在 shell 中执行，或者写入配置文件 ~/.tmux.conf 中生效")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `prefix :` 可以进入 tmux 命令模式")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" -wg allow-rename off                                                            \n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" -wg automatic-rename off\n")])])]),e("h3",{attrs:{id:"开启鼠标支持"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开启鼠标支持"}},[t._v("#")]),t._v(" 开启鼠标支持")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("$ tmux "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" -g mouse on\n")])])]),e("p",[t._v("鼠标支持默认是关闭的，开启鼠标后，支持复制，翻屏，切换面板，切换窗口，resize。")]),t._v(" "),e("p",[t._v("鼠标支持的功能很强大，至此已经成功打造了一个 "),e("code",[t._v("iterm2")]),t._v(" 了。不过鼠标模式我不大喜欢，所以还是禁了。")]),t._v(" "),e("p",[t._v("何况，开启鼠标支持后，谁都可以操作我的终端了，一点逼格也没有了")]),t._v(" "),e("h3",{attrs:{id:"保留当前路径"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#保留当前路径"}},[t._v("#")]),t._v(" 保留当前路径")]),t._v(" "),e("p",[t._v("新开 "),e("code",[t._v("pane")]),t._v(" 和 "),e("code",[t._v("window")]),t._v(" 时，保持当前路径。为以前的命令添加参数 "),e("code",[t._v("-c")]),t._v("，表明新建窗口或者面板的路径。")]),t._v(" "),e("p",[t._v("新开面板的命令为 "),e("code",[t._v("split-window")])]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以下命令直接在 tmux 命令模式执行，或者加关键字 `tmux` 在 shell 中执行，或者写入配置文件 ~/.tmux.conf 中生效")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `prefix :` 可以进入 tmux 命令模式")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("bind")]),t._v(" c new-window -c "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#{pane_current_path}"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("bind")]),t._v(" % split-window -h -c "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#{pane_current_path}"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("bind")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"'")]),t._v(" split-window -c "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#{pane_current_path}"')]),t._v("\n")])])]),e("h3",{attrs:{id:"最大化当前面板"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#最大化当前面板"}},[t._v("#")]),t._v(" 最大化当前面板")]),t._v(" "),e("p",[t._v("命令为 "),e("code",[t._v("tmux resize-pane -Z")]),t._v("，默认快捷键为 "),e("code",[t._v("prefix z")]),t._v("。需要查看更加详细的信息时可以按 "),e("code",[t._v("prefix z")]),t._v(" 进入全屏，完毕之后，再按一次恢复。相当酷的一个功能。")]),t._v(" "),e("h3",{attrs:{id:"翻屏"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#翻屏"}},[t._v("#")]),t._v(" 翻屏")]),t._v(" "),e("p",[t._v("第一次使用 "),e("code",[t._v("tmux")]),t._v(" 时， 使用"),e("code",[t._v("webpack")]),t._v("，输出信息很多，而有用的错误信息被覆盖。此时，往上翻屏就很重要了。此时要说下 "),e("code",[t._v("tmux window")]),t._v(" 下的两种模式，")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("default-mode")])]),t._v(" "),e("p",[t._v("就是刚进入 "),e("code",[t._v("tmux")]),t._v(" 默认的模式。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("copy-mode")])]),t._v(" "),e("p",[t._v("按 "),e("code",[t._v("prefix [")]),t._v(" 键进入此模式，类似于 "),e("code",[t._v("vi(emacs)")]),t._v(" 的 "),e("code",[t._v("normal mode")]),t._v("，支持复制，粘贴，查找，以及翻页。具体是 "),e("code",[t._v("vi")]),t._v(" 还是 "),e("code",[t._v("emacs")]),t._v(" 可以根据以下命令探知，表明查看全局窗口设置 "),e("code",[t._v("mode-keys")]),t._v("，默认会是 "),e("code",[t._v("vi")]),t._v("，如果不是，那就请设置为 "),e("code",[t._v("vi")]),t._v(" 吧~")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("$ tmux show-window-options -g mode-keys\n")])])]),e("p",[t._v("与 "),e("code",[t._v("vi")]),t._v(" 命令相同，如上下翻页(半屏)可使用 "),e("code",[t._v("C-d")]),t._v(" 以及 "),e("code",[t._v("C-u")]),t._v("，当然你也可以使用 "),e("code",[t._v("hjkl")]),t._v("。")])])]),t._v(" "),e("p",[t._v("另外，也可以开启鼠标支持，使用滚轮来翻屏。")]),t._v(" "),e("h3",{attrs:{id:"复制与粘贴"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#复制与粘贴"}},[t._v("#")]),t._v(" 复制与粘贴")]),t._v(" "),e("p",[t._v("上边说到 "),e("code",[t._v("copy-mode")]),t._v("，接下来是复制与粘贴。进入 "),e("code",[t._v("copy-mode")]),t._v(" 后，"),e("code",[t._v("v")]),t._v(" 开始选中，"),e("code",[t._v("y")]),t._v(" 来进行复制并会退出 "),e("code",[t._v("copy-mode")]),t._v("。使用 "),e("code",[t._v("prefix ]")]),t._v(" 来进行粘贴。")]),t._v(" "),e("p",[e("strong",[t._v("在 linux 下复制粘贴是最重要最实用的功能了")])]),t._v(" "),e("p",[e("code",[t._v("v & y")]),t._v(" 为自定义配置，配置如下")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("bind -t vi-copy v begin-selection\nbind -t vi-copy y copy-selection\n")])])]),e("p",[t._v("复制操作会把内容存进 "),e("code",[t._v("buffer")]),t._v(" 里，熟悉以下几个命令能够更熟练地操作 buffer")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("$ tmux list-buffers           "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出所有 buffer")]),t._v("\n$ tmux show-buffer -b "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示最近 buffer,也可指定 buffer name")]),t._v("\n$ tmux choose-buffer　　    　"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入选择 buffer 界面，更加灵活")]),t._v("\n")])])]),e("p",[t._v("另外，也可以开启鼠标支持，用鼠标来选择文字。")]),t._v(" "),e("h3",{attrs:{id:"查找关键字"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查找关键字"}},[t._v("#")]),t._v(" 查找关键字")]),t._v(" "),e("p",[t._v("既然进入 "),e("code",[t._v("copy-mode")]),t._v("，熟悉 "),e("code",[t._v("vi")]),t._v(" 的朋友一定知道查找是 "),e("code",[t._v("/")]),t._v(" 与 "),e("code",[t._v("?")]),t._v("。")]),t._v(" "),e("h3",{attrs:{id:"快速定位窗口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速定位窗口"}},[t._v("#")]),t._v(" 快速定位窗口")]),t._v(" "),e("p",[t._v("假设你新建了多个窗口，需要快速定位到某一个窗口，而你虽知道那个窗口中的内容，却忘了窗口号，这样如何解决呢？")]),t._v(" "),e("p",[t._v("有一个很好的解决方案的命令便是 "),e("code",[t._v("find-window")]),t._v("，更好用的便是默认的快捷键 "),e("code",[t._v("prefix f")]),t._v("。输入窗口内容的关键字，便可以快速定位到窗口，不过有一个小小的缺点，便是"),e("strong",[t._v("不能定位到面板！")])]),t._v(" "),e("h3",{attrs:{id:"last-but-not-least"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#last-but-not-least"}},[t._v("#")]),t._v(" Last but not least")]),t._v(" "),e("p",[e("strong",[t._v("man tmux ！")]),t._v(" 不看文档不足以熟练，不看源码不足以精通。所以，平常需要多看几眼文档，多瞧几个命令。")]),t._v(" "),e("h2",{attrs:{id:"小结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),e("p",[t._v("通过本章你可以很熟练地在服务器中使用 tmux 同时管理多个窗口，再结合 vim 的使用就可以使在服务器里工作达到随心所欲的地步了。关于 vim 的使用，配置以及插件，可以参考上一章 "),e("a",{attrs:{href:"https://shanyue.tech/op/vim-setting",target:"_blank",rel:"noopener noreferrer"}},[t._v("vim 快速上手，配置以及插件"),e("OutboundLink")],1),t._v("。")])])}),[],!1,null,null,null);s.default=n.exports}}]);