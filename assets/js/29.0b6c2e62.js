(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{373:function(s,t,n){s.exports=n.p+"assets/img/nginx.eb9c02c8.png"},482:function(s,t,n){"use strict";n.r(t);var a=n(40),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"使用-ingress-进行域名访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-ingress-进行域名访问"}},[s._v("#")]),s._v(" 使用 Ingress 进行域名访问")]),s._v(" "),a("p",[s._v("在上篇文章中我们已经使用 k8s 部署了第一个应用，此时我们可以使用 "),a("code",[s._v("Ingress")]),s._v(" 使它可以在互联网上可以被访问到 (当然你要有自己的域名并且指向正确)")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://shanyue.tech/k8s/pod",target:"_blank",rel:"noopener noreferrer"}},[s._v("部署你的第一个应用: Pod，Application 与 Service"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("以下是官网搬用的关于 "),a("code",[s._v("Ingress")]),s._v(" 的一幅图，用以描述 Ingress 的作用。如果你对它一无所知，你可以把它理解为传统的 nginx，用以配置自己网站的域名使之能够通过外网访问。")]),s._v(" "),a("div",{staticClass:"language-txt extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("internet\n    |\n[ Ingress ]\n--|-----|--\n[ Services ]\n")])])]),a("p",[s._v("其中，"),a("code",[s._v("Ingress")]),s._v(" 包含两个组件")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("Ingress")]),s._v(": 配置转发规则，类似于 nginx 的配置文件")]),s._v(" "),a("li",[a("code",[s._v("Ingress Controller")]),s._v(": 转发，类似于 nginx，它会读取 "),a("code",[s._v("Ingress")]),s._v(" 的规则并转化为 "),a("code",[s._v("nginx")]),s._v(" 的配置文件")])]),s._v(" "),a("p",[s._v("而 "),a("code",[s._v("Ingress Controller")]),s._v(" 除了 "),a("code",[s._v("nginx")]),s._v(" 外还有 "),a("code",[s._v("haproxy")]),s._v("，"),a("code",[s._v("ingress")]),s._v(" 等等，我们选用 "),a("code",[s._v("nginx")]),s._v(" 作为 Ingress Controller")]),s._v(" "),a("h2",{attrs:{id:"使用-helm-部署-nginx-ingress-controller"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-helm-部署-nginx-ingress-controller"}},[s._v("#")]),s._v(" 使用 helm 部署 nginx Ingress Controller")]),s._v(" "),a("p",[s._v("我们使用 helm 选择官方的 "),a("a",{attrs:{href:"https://github.com/helm/charts/tree/master/stable/nginx-ingress",target:"_blank",rel:"noopener noreferrer"}},[s._v("stable/nginx-ingress"),a("OutboundLink")],1),s._v(" chart 进行部署。")]),s._v(" "),a("p",[a("code",[s._v("nginx-ingress")]),s._v(" 会配置一个 type 为 "),a("code",[s._v("LoadBalancer")]),s._v(" 的 service， "),a("strong",[s._v("因此需要配置 "),a("code",[s._v("EXTERNAL-IP")]),s._v(" 为k8s集群节点的 IP。")]),s._v(" 在这里 external-ip 会设置为 "),a("code",[s._v("[172.17.68.39, 172.17.68.40]")])]),s._v(" "),a("p",[s._v("我们可以通过 "),a("code",[s._v("kubectl get nodes")]),s._v(" 来获取 IP 地址")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取node的 INTERNAL-IP，作为 LoadBalancer 的 EXTERNAL-IP")]),s._v("\n$ kubectl get nodes -o wide\nNAME       STATUS   ROLES    AGE   VERSION   INTERNAL-IP    EXTERNAL-IP   OS-IMAGE                KERNEL-VERSION               CONTAINER-RUNTIME\nshanyue    Ready    master   13d   v1.16.0   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".68.39   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        CentOS Linux "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-957.21.3.el7.x86_64   docker://18.6.2\nshuifeng   Ready    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   13d   v1.16.0   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".68.40   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        CentOS Linux "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-957.21.3.el7.x86_64   docker://18.6.2\n")])])]),a("p",[s._v("在这里 external-ip 会设置为 "),a("code",[s._v("[172.17.68.39, 172.17.68.40]")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("controller.service.externalIPs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".68.39\ncontroller.service.externalIPs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".68.40\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 helm v3 部署，如果使用 helm v2 部署的话，把 release-name 使用 --name 指定")]),s._v("\n$ helm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx-ingress stable/nginx-ingress --set "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"controller.service.externalIPs[0]=172.17.68.39,controller.service.externalIPs[1]=172.17.68.40"')]),s._v("\nNAME: nginx-ingress\nLAST DEPLOYED: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-10-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":21:44.115902395 +0800 CST "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("m")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("+1.904554085\nNAMESPACE: default\nSTATUS: deployed\nNOTES:\nThe nginx-ingress controller has been installed.\nIt may take a few minutes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the LoadBalancer IP to be available.\nYou can "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" the status by running "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubectl --namespace default get services -o wide -w nginx-ingress-controller'")]),s._v("\n\nAn example Ingress that makes use of the controller:\n\n  apiVersion: extensions/v1beta1\n  kind: Ingress\n  metadata:\n    annotations:\n      kubernetes.io/ingress.class: nginx\n    name: example\n    namespace: foo\n  spec:\n    rules:\n      - host: www.example.com\n        http:\n          paths:\n            - backend:\n                serviceName: exampleService\n                servicePort: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n              path: /\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This section is only required if TLS is to be enabled for the Ingress")]),s._v("\n    tls:\n        - hosts:\n            - www.example.com\n          secretName: example-tls\n\nIf TLS is enabled "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the Ingress, a Secret containing the certificate and key must also be provided:\n\n  apiVersion: v1\n  kind: Secret\n  metadata:\n    name: example-tls\n    namespace: foo\n  data:\n    tls.crt: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("base64 encoded cert"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    tls.key: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("base64 encoded key"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  type: kubernetes.io/tls\n")])])]),a("p",[s._v("校验 nginx-ingress 的部署情况")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ helm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nNAME            NAMESPACE       REVISION        UPDATED                                 STATUS          CHART\nnginx-ingress   default         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-10-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":21:44.115902395 +0800 CST deployed        nginx-ingress-1.24.0\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 nginx-ingress 所有的 service")]),s._v("\n$ kubectl get svc -l "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx-ingress\nNAME                            TYPE           CLUSTER-IP     EXTERNAL-IP                 PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                      AGE\nnginx-ingress-controller        LoadBalancer   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.101")]),s._v(".64.64   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".68.39,172.17.68.40   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":30285/TCP,443:31094/TCP   7m19s\nnginx-ingress-default-backend   ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.110")]),s._v(".76.15   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP                       7m19s\n")])])]),a("h2",{attrs:{id:"配置-ingress-映射域名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-ingress-映射域名"}},[s._v("#")]),s._v(" 配置 Ingress 映射域名")]),s._v(" "),a("p",[s._v("与已知知识关联有助于我们更好地学习新知识，以下是关于 nginx 与 ingress 部署一个博客应用的简单配置文件")]),s._v(" "),a("ol",[a("li",[s._v("外网通过域名 nginx.xiange.tech 来访问应用")]),s._v(" "),a("li",[s._v("代理服务 nginx 来做负载均衡")]),s._v(" "),a("li",[s._v("nginx 暴露出 80 端口")])]),s._v(" "),a("div",{staticClass:"language-conf extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("server {\n  listen 80\n  server_name nginx.xiange.tech\n\n  location / {\n    proxy_pass: http://nginx:80\n  }\n}\n")])])]),a("p",[s._v("使用 "),a("code",[s._v("Ingress")]),s._v(" 配置路由规则如下")]),s._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" networking.k8s.io/v1beta1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Ingress\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("ingress\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rules")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx.xiange.tech\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("paths")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("backend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("serviceName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("servicePort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /\n")])])]),a("p",[s._v("我们使用 "),a("code",[s._v("Ingress")]),s._v(" 把它配置到了 "),a("code",[s._v("nginx.xiange.tech")]),s._v(" 该域名下，在公网环境下的浏览器中打开域名 "),a("code",[s._v("nginx.xiange.tech")]),s._v("，可以看到熟悉的 nginx 配置页面")]),s._v(" "),a("p",[a("img",{attrs:{src:n(373),alt:"nginx页面部署成功，通过浏览器访问"}})]),s._v(" "),a("h2",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),a("p",[s._v("部署一个应用从 "),a("code",[s._v("Deployment")]),s._v("，"),a("code",[s._v("Service")]),s._v(" 再到 "),a("code",[s._v("Ingress")]),s._v(" 的完整配置文件如下")]),s._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deployment\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("deployment\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("alpine\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Service\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("protocol")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" TCP\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("targetPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" networking.k8s.io/v1beta1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Ingress\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("ingress\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rules")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx.xiange.tech\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("paths")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("backend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("serviceName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("servicePort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);