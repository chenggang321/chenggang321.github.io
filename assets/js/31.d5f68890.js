(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{320:function(t,e,a){t.exports=a.p+"assets/img/cdn-cache.d2979a45.jpg"},507:function(t,e,a){"use strict";a.r(e);var r=a(40),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"如果你想搭建一个博客"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#如果你想搭建一个博客"}},[t._v("#")]),t._v(" 如果你想搭建一个博客")]),t._v(" "),r("p",[t._v("如果你只想搭建一个博客，那么你不需要一个服务器就能完成搭建工作，而且会更容易些")]),t._v(" "),r("p",[t._v("相对而言使用一个"),r("em",[t._v("静态网站网站托管服务")]),t._v("，复杂度与工作量就会少了很多，毕竟它部署时只需要维护若干静态文件。也更适合刚接触博客搭建或者没有服务器的同学")]),t._v(" "),r("h2",{attrs:{id:"_00-架构"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_00-架构"}},[t._v("#")]),t._v(" 00 架构")]),t._v(" "),r("p",[t._v("根据你的域名有没有备案以及对网络时延的要求，可以选择以下两种方案")]),t._v(" "),r("ol",[r("li",[r("code",[t._v("SSG")]),t._v(" + "),r("code",[t._v("github")]),t._v(" + "),r("code",[t._v("netlify/vercel")]),t._v("，适合域名没有进行备案且主要服务于国外的同学")]),t._v(" "),r("li",[r("code",[t._v("SSG")]),t._v(" + "),r("code",[t._v("github")]),t._v(" + "),r("code",[t._v("github actions")]),t._v(" + "),r("code",[t._v("alioss")]),t._v(" + "),r("code",[t._v("alicdn(可选)")]),t._v("，适合域名在国内进行备案的同学")])]),t._v(" "),r("p",[t._v("其中 "),r("code",[t._v("netlify")]),t._v(" 与 "),r("code",[t._v("vercel")]),t._v(" 都是国外优秀的网站托管平台，全球各地均有 CDN 节点，并支持与 github 协作进行自动部署，特别是 "),r("code",[t._v("vercel")]),t._v(" 好用到爆。以下是他们的官网，对于个人项目来说"),r("em",[t._v("完全免费")])]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://vercel.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vercel: Develop. Preview. Ship. For the best frontend teams"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://www.netlify.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Netlify: All-in-one platform for automating modern web projects"),r("OutboundLink")],1)])]),t._v(" "),r("p",[r("img",{attrs:{src:"https://raw.githubusercontent.com/shfshanyue/graph/master/draw/blog-arch-blog.jpg",alt:"如何搭建个人博客"}})]),t._v(" "),r("h2",{attrs:{id:"_01-选择一款静态网站生成器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_01-选择一款静态网站生成器"}},[t._v("#")]),t._v(" 01 选择一款静态网站生成器")]),t._v(" "),r("p",[t._v("动态博客带有数据库等存储，状态重，复杂性高，不便于部署与迁移。无状态的静态博客是一个不错的选择。")]),t._v(" "),r("p",[r("code",[t._v("SSG")]),t._v("，全称 "),r("code",[t._v("Static Site Generator")]),t._v("，静态网站生成器。如果你不想折腾数据库，那你可以选择一个静态网站生成器: "),r("strong",[t._v("你只需要喂给它一大堆 markdown，它就会生成一大堆 html 文件。")])]),t._v(" "),r("p",[t._v("至于生成器，这是我曾经使用过的，感觉都很不错，你可以任选一款，如何构建参考官方文档。")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/gohugoio/hugo",target:"_blank",rel:"noopener noreferrer"}},[t._v("hugo"),r("OutboundLink")],1),t._v(": github star 39k。使用 go 开发，是我用过的构建最快的生成器，它的简介也只有一句话: "),r("code",[t._v("The world’s fastest framework for building websites.")]),t._v("，不过我自我感觉它的主题样式略少。如果你想定制，那你需要对 "),r("code",[t._v("go")]),t._v(" 语言的 "),r("code",[t._v("template")]),t._v(" 有些了解。")]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/hexojs/hexo",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo"),r("OutboundLink")],1),t._v(": github star 28.4k。使用 node 开发，主题样式多，我还是较为喜欢这一点。")]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/vuejs/vuepress",target:"_blank",rel:"noopener noreferrer"}},[t._v("vuepress"),r("OutboundLink")],1),t._v(": github star 14.5k。使用 vue 开发，一般用作文档较多。从我的博客风格就可以看出来，它使用 "),r("code",[t._v("vuepress")]),t._v(" 构建。")]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/gatsbyjs/gatsby",target:"_blank",rel:"noopener noreferrer"}},[t._v("gatsby"),r("OutboundLink")],1),t._v(": github star 41 k。使用 React 开发，可定制性强。"),r("code",[t._v("React")]),t._v(" 的官网就是使用 "),r("code",[t._v("gatsby")]),t._v(" 开发")])]),t._v(" "),r("p",[t._v("我自己的博客 "),r("a",{attrs:{href:"https://shanyue.tech",target:"_blank",rel:"noopener noreferrer"}},[t._v("山月行"),r("OutboundLink")],1),t._v(" 目前使用 "),r("code",[t._v("vuepress")]),t._v(" 进行构建。")]),t._v(" "),r("h2",{attrs:{id:"_02-如何使他人评论博客文章"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_02-如何使他人评论博客文章"}},[t._v("#")]),t._v(" 02 如何使他人评论博客文章")]),t._v(" "),r("p",[t._v("有些小伙伴希望自己的博客引入评论系统，这样子可以更方便地与其他人交流。但是，引入评论势必引入"),r("em",[t._v("数据存储")]),t._v("，引入数据存储势必引入"),r("em",[t._v("后端 API")]),t._v("的编写，甚至需要买一个服务器来支持 API 及数据存储，此时问题就变得复杂化了。")]),t._v(" "),r("p",[t._v("而博客评论可视为特定的通用业务领域模型，就会有该领域模型中通用的解决方案，而我认为一种比较好的方案是：")]),t._v(" "),r("p",[r("strong",[t._v("使用 Github Issues 作为数据存储，使用 Github API 作为后端 API，使用 npm package 作为 SDK")])]),t._v(" "),r("p",[t._v("以下是借用 "),r("code",[t._v("github issues")]),t._v(" 的反响不错的两个 npm package，推荐使用")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/imsun/gitment",target:"_blank",rel:"noopener noreferrer"}},[t._v("gitment"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/gitalk/gitalk",target:"_blank",rel:"noopener noreferrer"}},[t._v("gittalk"),r("OutboundLink")],1)])]),t._v(" "),r("blockquote",[r("p",[t._v("我的博客刚开始使用了 gitment 作为评论系统，后来没人评论就关了...所以，有时候需不需要开博客评论，也要看看自己博客的流量")])]),t._v(" "),r("h2",{attrs:{id:"_03-如何部署"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_03-如何部署"}},[t._v("#")]),t._v(" 03 如何部署")]),t._v(" "),r("p",[t._v("当使用 SSG 在本地搭建好一个博客后，需要部署在互联网提供服务，"),r("em",[t._v("可以使用诸多免费的托管平台")]),t._v("。")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("github pages"),r("OutboundLink")],1),t._v(": 部署后可以使用二级域名 "),r("code",[t._v("xxx.github.io")])]),t._v(" "),r("li",[r("a",{attrs:{href:"https://docs.netlify.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("netlify"),r("OutboundLink")],1),t._v(": 部署后可以使用二级域名 "),r("code",[t._v("xxx.netlify.com")])]),t._v(" "),r("li",[r("a",{attrs:{href:"https://vercel.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("vercel"),r("OutboundLink")],1),t._v(": 部署后可以使用二级域名 "),r("code",[t._v("xxx.vercel.app")])])]),t._v(" "),r("p",[t._v("此处及剩余篇章使用 "),r("code",[t._v("netlify")]),t._v(" 进行演示，它可以结合 "),r("code",[t._v("github")]),t._v(" 做 CI/CD: 当你把代码 push 到 github 的指定分支时，它就会在 netlify 自动部署。另外它也有 "),r("code",[t._v("Cache")]),t._v("、"),r("code",[t._v("Redirect")]),t._v("、"),r("code",[t._v("Rewrite")]),t._v(" 等诸多配置")]),t._v(" "),r("p",[t._v("我的"),r("a",{attrs:{href:"https://shanyue.tech",target:"_blank",rel:"noopener noreferrer"}},[t._v("个人博客"),r("OutboundLink")],1),r("em",[t._v("曾经")]),t._v("使用了 "),r("code",[t._v("netlify")]),t._v("，关于构建的配置文件如下，需保存在根目录的 "),r("code",[t._v("netlify.toml")]),t._v(" 文件中。由于我的博客使用了 "),r("code",[t._v("vuepress")]),t._v(" 作为 SSG，因此配置文件如下")]),t._v(" "),r("div",{staticClass:"language-toml extra-class"},[r("pre",{pre:!0,attrs:{class:"language-toml"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("build")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token key property"}},[t._v("base")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token key property"}},[t._v("publish")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('".vuepress/dist"')]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token key property"}},[t._v("command")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run build"')]),t._v("\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token key property"}},[t._v("for")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/assets/*"')]),t._v("\n\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers.values")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token key property"}},[t._v("cache-control")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"max-age=31536000"')]),t._v("\n")])])]),r("p",[t._v("关于部署的详细流程，可参考以下两篇文章:")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://shanyue.tech/no-vps/deploy-fe-with-netlify.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 netlify 部署你的前端应用"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://shanyue.tech/no-vps/deploy-fe-with-alioss.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 alioss 部署你的前端应用"),r("OutboundLink")],1)])]),t._v(" "),r("h2",{attrs:{id:"_04-如果你想使用自己的域名"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_04-如果你想使用自己的域名"}},[t._v("#")]),t._v(" 04 如果你想使用自己的域名")]),t._v(" "),r("p",[t._v("你可以在域名提供商 "),r("a",{attrs:{href:"https://sg.godaddy.com/zh",target:"_blank",rel:"noopener noreferrer"}},[t._v("godaddy"),r("OutboundLink")],1),t._v(" 或者"),r("a",{attrs:{href:"https://wanwang.aliyun.com/domain/searchresult/#/?keyword=shanyue&suffix=tech",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云"),r("OutboundLink")],1),t._v(" 直接注册一个。")]),t._v(" "),r("p",[t._v("并且在域名提供商处配置 CNAME: "),r("code",[t._v("yourdomain.com")]),t._v(" -> "),r("code",[t._v("xxx.netlify.com")])]),t._v(" "),r("p",[r("strong",[t._v("当使用了自己的域名后，你需要去 "),r("code",[t._v("netlify")]),t._v(" 为你的域名配置 "),r("code",[t._v("https")]),t._v("，netlify 会根据你提供的域名通过 "),r("code",[t._v("Lets Encrypt")]),t._v(" 为你自动生成证书")])]),t._v(" "),r("h2",{attrs:{id:"_05-使用-cdn"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_05-使用-cdn"}},[t._v("#")]),t._v(" 05 使用 CDN")]),t._v(" "),r("p",[t._v("由于网站托管服务的服务器大都在国外，网络速度上可能惨不忍睹，配置 CDN 就能派上了用场。如果域名"),r("em",[t._v("已备案")]),t._v("，建议使用阿里云的CDN服务，"),r("em",[t._v("按量收费")]),t._v("。")]),t._v(" "),r("p",[r("strong",[t._v("当然这时候 "),r("code",[t._v("https")]),t._v(" 需要重新配置 (阿里云的 https 流量也会收费)")])]),t._v(" "),r("blockquote",[r("p",[t._v("Note: 使用 CDN 时要配置好正确的 nameserver")])]),t._v(" "),r("h2",{attrs:{id:"_06-配置永久缓存"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_06-配置永久缓存"}},[t._v("#")]),t._v(" 06 配置永久缓存")]),t._v(" "),r("p",[t._v("对于 vue/react 此类现代前端技术而言，结合 webpack 工程化越来越出色。如 "),r("code",[t._v("vuepress")]),t._v(" 中 "),r("code",[t._v("SPA")]),t._v(" 与 "),r("code",[t._v("SEO")]),t._v(" 的结合， "),r("strong",[t._v("但最重要的是生成带有 hash 的静态资源文件")])]),t._v(" "),r("p",[r("strong",[t._v("为带有 hash 的静态资源文件在源站(即netlify)配置永久缓存，也能在阿里云上为 CDN 与 https 省不少流量费")])]),t._v(" "),r("div",{staticClass:"language-toml extra-class"},[r("pre",{pre:!0,attrs:{class:"language-toml"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token key property"}},[t._v("for")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/assets/*"')]),t._v("\n\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers.values")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token key property"}},[t._v("cache-control")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"max-age=31536000"')]),t._v("\n")])])]),r("p",[t._v("以下是缓存在CDN命中的截图")]),t._v(" "),r("ol",[r("li",[r("code",[t._v("cache-control: ma-age=31536000")]),t._v(" 设置永久缓存")]),t._v(" "),r("li",[r("code",[t._v("via")]),t._v(" 通过的代理节点")]),t._v(" "),r("li",[r("code",[t._v("x-cache: HIT")]),t._v(" 在CDN上命中缓存")])]),t._v(" "),r("p",[r("img",{attrs:{src:a(320),alt:"proxy cache"}})]),t._v(" "),r("h2",{attrs:{id:"相关文章"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#相关文章"}},[t._v("#")]),t._v(" 相关文章")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://shanyue.tech/no-vps/deploy-fe-with-netlify.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 netlify 部署你的前端应用"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://shanyue.tech/no-vps/deploy-fe-with-alioss.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 alioss 部署你的前端应用"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://shanyue.tech/frontend-engineering/docker.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何使用 docker 高效部署前端应用"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=s.exports}}]);